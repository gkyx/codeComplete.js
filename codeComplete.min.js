!function(t){function e(t){var e=t.split(".");return e[e.length-1]}function l(t){var e=t.value.replaceAll("\n"," ").replaceAll("	"," ").substr(0,t.selectionStart).split(" ");return e[e.length-1]}let n=(t,e)=>{let{offsetLeft:l,offsetTop:n}=t,o=document.createElement("div"),s=getComputedStyle(t);for(let a of s)o.style[a]=s[a];let r="INPUT"===t.tagName?t.value.replace(/ /g,"."):t.value,u=r.substr(0,e);o.textContent=u,"TEXTAREA"===t.tagName&&(o.style.height="auto"),"INPUT"===t.tagName&&(o.style.width="auto");let i=document.createElement("span");i.textContent=r.substr(e)||".",o.appendChild(i),document.body.appendChild(o);let{offsetLeft:c,offsetTop:f}=i;return{x:l+c,y:n+f}};t.fn.codeComplete=function(o){var s,a=this[0];this.autocomplete({minLength:0,delay:o.delay??0,autoFocus:!0,source:function(r,u){var i=l(a),c=e(i);if(""===i){t(a).autocomplete("close");return}s=n(a,a.selectionStart-c.length),u(t.ui.autocomplete.filter(function t(e,l){var n=e.split("."),o=l;for(let s=0;s<n.length-1;s++)if(void 0===(o=o[n[s]]))return[];return Array.isArray(o)?o:Object.keys(o)}(i,o.context),c))},focus:function(){return!1},select:function(t,n){var o=l(a),s=e(o),r=this.value.substr(a.selectionStart),u=this.value.substr(0,a.selectionStart-s.length);return this.value=u+n.item.value+r,this.selectionEnd=u.length+n.item.value.length,!1},open:function(e,l){var n=t(".ui-autocomplete");n.css("top",`calc(${s.y}px + ${n.css("fontSize")})`),n.css("left",s.x),n.css("width","auto")}})}}(jQuery);